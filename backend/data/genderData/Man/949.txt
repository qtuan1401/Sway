TEHRAN  —   With Iran calibrating how to deal with President Trump, its supreme leader, Ayatollah Ali Khamenei, caustically thanked the new American leader on Tuesday for revealing “the true face” of the United States. “We are thankful to this newcomer,” Ayatollah Khamenei told Iranian Air Force commanders, according to a report posted on his official website. Iranian officials had been showing caution since Mr. Trump took office last month. Despite expressing anger at his policies and comments, even   have taken care not to provoke the new American president. But on Tuesday, it became seemingly apparent to Iran’s leaders that Mr. Trump is not easily ignored. After Ayatollah Khamenei spoke out sarcastically about Mr. Trump, others expressed worries. Iran’s foreign minister, Mohammad Javad Zarif, said in an interview with a local newspaper that he expected “difficult times ahead” for Iran, now that Mr. Trump was in charge. Iran’s president, Hassan Rouhani, defended the nuclear agreement between his country and six world powers, including the United States, by saying that the deal was “ ” for all. But Mr. Trump  —   who has described the nuclear agreement as “really, really bad” but has not made any moves to alter it  —   disparaged Iran again on Twitter, this time in a defense against criticism that he is too close to Russia and its leader, President Vladimir V. Putin. Mr. Trump wondered how President Barack Obama could have made a nuclear agreement with Iran, a country Mr. Trump described as “#1 in terror. ” Mr. Trump seemed to be summarizing comments by his defense secretary, Jim Mattis, who on Sunday called Iran the “biggest sponsor of state terrorism. ” Many Iranians have expressed astonishment and ridicule at such assertions, pointing to terrorist groups that despise Iran and the West. First Al Qaeda, responsible for the Sept. 11, 2001, attacks, and more recently the Islamic State, which has been killing thousands in the Middle East and is responsible for committing and inspiring attacks in Europe and the United States. “Trump is trying to corner Iran, to make us bow before the U. S. and change our behavior, or face confrontation,” said Nader Karimi Joni, a political activist close to Mr. Rouhani’s government. Mr. Trump included Iran on  a list of seven predominantly Muslim countries whose citizens have been barred from entering the United States under an executive order that has been blocked, for now, in the American court system. Mr. Trump’s national security adviser, Michael T. Flynn, warned Tehran last week that it had been put “on notice” after an Iranian missile test. Washington imposed new economic sanctions on 25 people and entities after the missile launch, which Mr. Flynn said had violated a 2015 United Nations Security Council resolution approved after the United States and other world powers reached an agreement with Iran on its nuclear program. Iran has asserted that its missile tests do not violate that resolution and fall within its rights to  . In another possible move against Iran, Mr. Trump’s advisers are debating an order intended to designate its Islamic Revolutionary Guards Corps as a foreign terrorist organization, according to current and former officials in the United States briefed on the deliberations. For Ayatollah Khamenei, Mr. Trump’s ascent appears to have vindicated many suspicions harbored by the Iranian leader, who has said many times that the United States cannot be trusted. “He has proven what we have been saying for more than 30 years  —   we would always speak about the political, economic, moral and social corruption in the U. S. administration  —   this man revealed it during the election campaign and since then,” Ayatollah Khamenei said, according to a translated text of the speech. Hamidreza Taraghi, a political analyst close to Iran’s leaders, said Mr. Trump’s “threatening and ranting” style reflected a miscalculation of Iran’s power. “He will soon realize Iran will not be intimidated,” Mr. Taraghi said. The history of animosity between both countries is long and deep. Several American administrations, including Mr. Obama’s, have argued for years that Iran is a state sponsor of terrorism, because of its support for the Lebanese Hezbollah movement and the Palestinian groups Hamas and Islamic Jihad, which the United States regards as terrorist organizations. Iran has also been held responsible by the United States for several terror attacks, most decades ago. One of them, of course, was the seizure of 54 members of the American Embassy staff in Tehran for 444 days during the Islamic Revolution in 1979. Iran also has been accused of involvement in a 1983 bomb attack at a Marines barracks in Lebanon, where 241 service personnel died. In 2003, a federal judge ruled that Hezbollah carried out the attack at the behest of Iran. Several judges have ordered Iran to pay billions of dollars in damages. Iran denies the accusations. Iran has pressed several claims against the United States. Iran holds the United States responsible for having supported Saddam Hussein with intelligence, funds and weapons after he attacked Iran in 1980, dragging both countries into a   war where thousands of Iranians and Iraqis died. In 1988, an American naval vessel, the Vincennes, shot down an Iran Air commercial plane, flying over the Persian Gulf to Dubai, in the United Arab Emirates. All 290 people aboard died. Iran called the attack deliberate and the United States called it a mistake. Under a settlement at the International Court of Justice in The Hague, the United States offered no apologies and was ordered to pay around $60 million in damages to families of the victims. Some of Mr. Trump’s top aides apparently view Iran and its clerical leaders as a leading source of evil. During his inaugural speech, Mr. Trump vowed to “unite the civilized world against radical Islamic terrorism, which we will eradicate from the face of the Earth. ” At the time, many thought he meant the Islamic State, but in books and speeches both Mr. Flynn and Mr. Mattis said Iran was radically Islamic and described the country as the biggest threat to peace in the Middle East. In a Twitter post on Friday, Mr. Trump said: “Iran is playing with fire  —   they don’t appreciate how ‘kind’ President Obama was to them. Not me!” Ayatollah Khamenei responded to Mr. Trump’s Friday posting in biting fashion with his own remarks on Twitter. “Iran should’ve appreciated Obama!” he wrote, adding, using the Arabic acronym for the Islamic State: “How come? Appreciate him for #DAESH, war in Iraq Syria or public support for 2009 unrest?” In a   post, he said that Iranians would hold a rally on Friday, the 38th anniversary of the Islamic Revolution, to show “their position toward threats. ”