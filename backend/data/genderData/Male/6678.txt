WASHINGTON  —   President Obama said Wednesday that he planned to leave 8, 400 American troops in Afghanistan until the end of his term, further slowing the drawdown in a   war that Mr. Obama pledged to end on his watch but now seems likely to grind on indefinitely. Acknowledging that the Taliban had retaken territory and were terrorizing the population, Mr. Obama said he was again adjusting his plan to withdraw American forces. The announcement will leave his successor with a substantial military commitment in the country, though far less than the nearly 40, 000 troops deployed there when he took office. “The security situation in Afghanistan remains precarious,” Mr. Obama said from the Roosevelt Room of the White House. “Even as they improve, Afghan security forces are still not as strong as they need to be. ” Those troops, he said, had not been able to quell a string of attacks and suicide bombings, including in the capital, Kabul. The United States has close to 10, 000 soldiers in Afghanistan, where they train and equip Afghan forces, and carry out counterterrorism operations. When he last tinkered with the drawdown schedule, Mr. Obama said he hoped to reduce that number to 5, 500 by early 2017. Now, more than 8, 000 troops will remain, and it will be up to Mr. Obama’s successor to order any further reductions. The president recently loosened the rules of engagement for American troops to give them the ability to fight the Taliban directly, and more flexibility to carry out airstrikes or wage ground combat. Mr. Obama cast his decision as a vote of confidence in Afghanistan’s government, led by President Ashraf Ghani, as well as in the support of NATO members and other partners, who have contributed 6, 000 troops. But it also underscores the fact that American hopes of building an Afghan force capable of securing the entire country had fallen short. “We have to deal with the realities of the world as it is,” said Mr. Obama, who was flanked by Defense Secretary Ashton B. Carter and the chairman of the Joint Chiefs of Staff, Gen. Joseph F. Dunford Jr. “It is going to continue to take time to build up military capacity that we sometimes take for granted. Given the enormous challenges they face, the Afghan people will need the partnership of the world, led by the United States, for many years to come. ” Mr. Obama announced the decision a day before leaving for a NATO summit meeting in Warsaw. Administration officials said the timing was intended to clarify American intentions and demonstrate that the United States was committed to Afghanistan. The president made the decision, which was very closely held, after a lengthy internal debate, and based on a recommendation from the American commander in Afghanistan, Gen. John W. Nicholson Jr. Keeping 8, 400 troops in the field, a senior administration official said, would allow American forces there to advise Afghan commanders “at the   and   level out in the field” over a sustained period, something that would not have been possible at lower troop levels. The number represents a slight decline from the 9, 800 troops currently deployed. “It’s an important and timely shift,” said Daniel F. Feldman, who was Mr. Obama’s special representative to Afghanistan and Pakistan. “I welcome it as a demonstration, not only of the administration’s flexibility in best advancing our national security interests in Afghanistan, but of the   commitment we’ve said we’ve had to Afghanistan, but which was being questioned there. ” Mr. Feldman was among more than a dozen former military commanders and diplomats who had urged Mr. Obama last month in a letter not to cut troop levels. Two prominent Republican senators, John McCain of Arizona and Lindsey Graham of South Carolina, added their voices to that call. “If we go to 5, 500, this place will fall apart quickly, quicker than Iraq,” said Mr. Graham, who joined Mr. McCain on a July 4 visit to Afghanistan. “If we keep 9, 800, there is a decent chance we can succeed. ” But Representative Jim McGovern, Democrat of Massachusetts and a critic of the war, said, “We are engaged in what appears to be an endless war, with no strategy about how to end the conflict and disengage our troops. ” Besides fragile security, the decision reflected American worries that Al Qaeda was regrouping in Afghanistan, and that the Islamic State had established a foothold there. Mr. Obama repeated his vow that he would not allow Afghanistan to be used as a safe haven for terrorists. There have been other signs that the United States is preparing for a   counterterrorism campaign. In May, a missile fired from an American drone killed Mullah Akhtar Muhammad Mansour, the head of the Taliban, as he was traveling in Pakistan’s Balochistan Province. The decision to strike him on Pakistani soil, and then to announce it publicly, suggested a new, more aggressive approach by the United States. “We can’t forget what’s at stake in Afghanistan,” Mr. Obama said. “This is where Al Qaeda is trying to regroup. This is where ISIL continues to try to expand is presence,” he said, using the administration’s preferred acronym for the Islamic State. The Afghan government had lobbied privately to keep the troops, American officials said. “We were expecting a decision based on the ground realities, and we welcome President Obama’s decision,” said Haroon Chakhansuri, a spokesman for Mr. Ghani. The government has struggled with security as American soldiers have left, steadily losing territory to Taliban insurgents. They briefly captured Kunduz last year, the first time they had seized a major urban center since the fall of the Taliban regime in 2001. Insurgents claiming affiliation with the Islamic State have also contested districts in eastern Afghanistan, and have remained a persistent threat despite major military operations against them. Despite the assassination of Mullah Mansour, the Taliban have retained their ability to carry out attacks in cities, most recently killing at least 33 people, almost all of them police cadets, in a bombing in Kabul. The deployment, Mr. Obama noted, was a far cry from the 100, 000 combat troops once there. But he acknowledged the frustration people might feel at the inability of the United States to draw this war to a close. “When we first sent our forces into Afghanistan 14 years ago,” he said, “few Americans imagined we’d be there  —   in any capacity  —   this long. ”