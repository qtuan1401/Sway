CONCORD, N. H.  —   New Hampshire Gov. Maggie Hassan, a Democrat, has unseated Senator Kelly Ayotte, a Republican, in one of the most competitive and closely watched races of this election cycle. The race was called Wednesday afternoon. The race cost about $120 million, an extraordinary sum for such a small state. The main challenge for both was to keep their bases happy while appealing to the state’s large number of independents. This forced both candidates to emphasize bipartisanship and to try to keep politics out of major issues, like the state’s crushing opioid epidemic. Ms. Ayotte, 48, a former prosecutor, has been a rising star in Washington, where she allied herself with conservative causes, like defunding Planned Parenthood and opposing a confirmation vote on a Supreme Court nominee. She sought to present a more moderate face at home. But her delicate dance around Donald J. Trump’s candidacy drew considerable negative attention. After saying she “absolutely” saw him as a role model, she said she would not vote for him. Ms. Hassan, 58, a former State Senate majority leader who helped pass   marriage, allied herself with the Democrats’ biggest stars, including President and Michelle Obama, as they flooded the state for Hillary Clinton. But Ms. Hassan has broken with her party on other occasions, saying, for example, that the federal government needed better screening of Syrian refugees before she would allow them in New Hampshire.