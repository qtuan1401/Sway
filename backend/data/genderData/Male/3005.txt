BAGHDAD  —   Iraqi forces quickly entered central areas of Falluja on Friday after weeks of battling the Islamic State, fighting that had forced thousands of civilians to flee and overwhelmed the ability of aid agencies to care for them. Reporting little resistance from Islamic State fighters, counterterrorism forces raised the Iraqi flag over the main government building in central Falluja, officers and state television reports said. They said that   forces moved on to besiege the city’s main hospital, which was the first target of American forces when they invaded the city in 2004 and in recent months has served as a headquarters complex for the Islamic State. The rapid and unexpected gains suggested a shift in tactics by the Sunni extremists of the Islamic State, also known as ISIS or ISIL, or perhaps a sign of their weakness, as they abandoned their   positions and regrouped in western neighborhoods of Falluja. That allowed thousands of civilians, who aid groups had said were being held as human shields, to flee across two bridges over the Euphrates River beginning on Thursday. Though the battle appeared far from over, Iraqi commanders on the ground were optimistic that the advance, which had slowed in the face of Islamic State snipers, roadside bombs and tunnel networks that allowed fighters to move around undetected, would continue. “ISIS has lost its power to defend Falluja,” Col. Jamal Lateef, a police commander in Anbar Province, said in an interview. “Its defensive lines have collapsed, and the battle of Falluja will be over in no time. ” Lt. Gen. Adbulwahab   a commander of Iraq’s counterterrorism forces who is in charge of the Falluja operation, said in a brief telephone interview that “ISIS has collapsed in Falluja very fast,” and that his forces were moving to northern and western neighborhoods. The United States, which has led a coalition targeting the Islamic State with airstrikes for almost two years in Iraq, has supported the battle for Falluja with air power, even as it has raised concerns about the role of Shiite militias backed by Iran in the fight. Washington has expressed fear that the participation of Shiite forces in assaulting a Sunni city like Falluja would heighten sectarian tensions. Col. Christopher C. Garver, an American military spokesman in Baghdad, said coalition airstrikes on Friday aided the taking of the government building in Falluja by knocking out two heavy machine guns nearby that were slowing the advance of Iraqi forces. “There will still be tough fighting ahead in the days coming,” Colonel Garver said. Referring to the Islamic State in Falluja, he said: “It’s certainly not one big amorphous mass. You have different fighters making different decisions for themselves. ” Prime Minister Haider   was quick to declare victory, even as he acknowledged that there was still resistance in the city. In a speech Friday night, he said, “Falluja has come back to the country’s bosom,” and vowed to focus on the next Islamic State target, the city of Mosul. Falluja, a major population center just 40 miles west of Baghdad, has been in the hands of the Islamic State since the end of 2013, longer than any other settlement in its   caliphate that straddles parts of Iraq and Syria. The city was a stronghold, and something of a birthplace, for Al Qaeda in Iraq, the precursor of the Islamic State that formed after the United States invasion in 2003. In Falluja, the Islamic State exploited the grievances of the Sunni population toward the sectarian policies of the former prime minister, Nuri Kamal   and was able to rapidly take control of the city two and a half years ago after Iraqi security forces assaulted a protest camp in the city. Officials speculated that the change in the complexion of the battle might have been because local tribal fighters who had been loyal to the Islamic State’s leadership and its transnational ambitions had now distanced themselves from the group’s foreign fighters. Or at least, the officials surmised, the tribal fighters had come to believe that victory by the Iraqi government was inevitable and were trying to get their families to safety. Lise Grande, the United Nations’ humanitarian coordinator for Iraq, said she was receiving reports that perhaps 10, 000 families, or 60, 000 people, were on the move toward   areas of western Anbar Province, where camps for the displaced are already overwhelmed and lack basic supplies, such as tents and clean drinking water. Karl Schembri, a spokesman for the Norwegian Refugee Council in Baghdad, said that, beginning on Thursday, Islamic State militants had been withdrawing from positions inside the city, allowing civilians to begin fleeing. Mr. Schembri said they had withdrawn from checkpoints at two bridges on the Euphrates, “and then people could just walk out. ” He expressed concern for the thousands of civilians stuck in the city, including those that are unable to walk out on their own  —   the elderly, disabled and pregnant. Referring to the militants, he said, “We don’t know where they have gone to or what their plan is. ” Tens of thousands of civilians have now fled Falluja since an offensive began late last month, and most have reached   camps that are running low on supplies. There are also growing concerns of diseases because of a lack of clean drinking water. Civilians in Falluja had also lived for months under siege conditions, without enough food or medicine, and many children have not been vaccinated for conditions like measles. According to Mr. Schembri, who has spoken to doctors recently in the camps, the majority of displaced civilians arrive with ailments like diarrhea, the flu and skin rashes. The latest exodus of civilians has not only added to the grave humanitarian crisis that has been unfolding for weeks in Anbar Province, but it has also presented a serious security challenge to the Iraqi government’s ability to carry out security screenings of civilians so that Islamic State militants are not able to escape by blending in. It has been a longstanding, and controversial, practice of the Iraqi authorities to separate men and boys from women, children and the elderly, among those fleeing Islamic State areas. The boys and men are taken to detention centers where they are interrogated about any ties to the Islamic State. The process is seen as necessary for security reasons, but vulnerable to abuses, especially if the Shiite militias take part. There have already been some abuses: Sunni officials have said that many men have been tortured by the militias, and the governor of Anbar Province has said that 49 men have been executed. A spokesman for Prime Minister Abadi has said that some people suspected of abuse have been arrested as a result. But with so many people fleeing in recent days, the ability of the security forces to carry out adequate screening has been strained, raising concerns that militants are also escaping amid the flow of the civilian population. Sajad Jiyad, who runs an Iraqi research organization, the   Center, and who sometimes advises the office of Mr. Abadi, wrote on Twitter on Friday, referring to the Arabic acronym for the Islamic State, “Daesh fighters escaping as civilians is a massive concern. ”